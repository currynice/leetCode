package com.cxy.brush.leetcode.editor.cn;
//ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° kã€‚
//
// å¦‚æœæŸä¸ª è¿ç»­ å­æ•°ç»„ä¸­æ°å¥½æœ‰ k ä¸ªå¥‡æ•°æ•°å­—ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªå­æ•°ç»„æ˜¯ã€Œä¼˜ç¾å­æ•°ç»„ã€ã€‚ 
//
// è¯·è¿”å›è¿™ä¸ªæ•°ç»„ä¸­ã€Œä¼˜ç¾å­æ•°ç»„ã€çš„æ•°ç›®ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// è¾“å…¥ï¼šnums = [1,1,2,1,1], k = 3
//è¾“å‡ºï¼š2
//è§£é‡Šï¼šåŒ…å« 3 ä¸ªå¥‡æ•°çš„å­æ•°ç»„æ˜¯ [1,1,2,1] å’Œ [1,2,1,1] ã€‚
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// è¾“å…¥ï¼šnums = [2,4,6], k = 1
//è¾“å‡ºï¼š0
//è§£é‡Šï¼šæ•°åˆ—ä¸­ä¸åŒ…å«ä»»ä½•å¥‡æ•°ï¼Œæ‰€ä»¥ä¸å­˜åœ¨ä¼˜ç¾å­æ•°ç»„ã€‚
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// è¾“å…¥ï¼šnums = [2,2,2,1,2,2,1,2,2,2], k = 2
//è¾“å‡ºï¼š16
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1 <= nums.length <= 50000 
// 1 <= nums[i] <= 10^5 
// 1 <= k <= nums.length 
// 
// Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ æ•°å­¦ æ»‘åŠ¨çª—å£ 
// ğŸ‘ 184 ğŸ‘ 0


//leetcode submit region begin(Prohibit modification and deletion)
class Solution {

    /**
     *
     * å‰ç¼€å’Œæ•°ç»„ï¼šå¿«é€Ÿè®¡ç®—æ•°ç»„æŸä¸ªåŒºé—´çš„å’Œ
     * 0 <= j <= i ï¼Œ[j,...,i] æ•°ç»„ä¸­å¥‡æ•°ä¸ªæ•°æ˜¯k ,[j,...,i] æ•°ç»„çš„ä¸ªæ•°
     * è€ƒè™‘ numsç§ç¬¦åˆæ¡ä»¶çš„
     * å®šä¹‰ pre[i] ä¸º [0,i] ä¸­å¥‡æ•°çš„ä¸ªæ•°
     * @param nums
     * @param k
     * @return
     */
    public int numberOfSubarrays(int[] nums, int k) {

        int n  = nums.length;

        for(int a=0;a < n;a++){
            nums[a] %= 2; //è½¬ä¸º 0,1
        }

//        pre[each] = pre[each-1] + [nums[each]&1]
//
//        pre[i] - pre[j-1] ç­‰äº k  --- [j,i] å­æ•°ç»„ä¸­å¥‡æ•°ä¸ªæ•°æ˜¯k
//        pre[j-1] ç­‰äº pre[i] - k
//
//       è§£æ³•ï¼šä¸¤å±‚å¾ªç¯éå†å¾—åˆ° pre[j] - pre[i] == kçš„ä¸ªæ•°ï¼Œæ—¶é—´å¤æ‚åº¦ O(n^2)


//      ä¼˜åŒ–ï¼šä½¿ç”¨ç¼“å­˜ä¼˜åŒ–åˆ°O(n) ï¼Œä½¿ç”¨cntæ•°ç»„ç»Ÿè®¡Sä¸­æ¯ä¸ªå€¼å‡ºç°çš„æ¬¡æ•°
//                                  key:å‰ç¼€å’Œ  value:å‰ç¼€å’Œä¸ªæ•°(å·¦å³åŒºé—´ä¸åŒçš„æ•°ç»„ä¸ªæ•°)ï¼Œ
//      åªéœ€éå†ä¸€æ¬¡ï¼Œè®¡ç®—å‡ºå‰ç¼€å’Œ pre[each]åï¼Œåœ¨resä¸­ç´¯åŠ ä¸Š    å‰ç¼€å’Œä¸º pre[i] - k çš„ä¸ªæ•°
//


        //æ„å»ºå‰ç¼€å’Œæ•°ç»„,
        int[] pre = new int[n];
        pre[0] = nums[0] &1;

        //ä¸‹æ ‡æ˜¯å‰ç¼€å’Œï¼ˆå³å¥‡æ•°çš„ä¸ªæ•°ï¼‰ï¼Œå€¼æ˜¯å‡ºç°æ¬¡æ•°ã€‚
        int[] cnt = new int[n+1];
        //å‰ç¼€å’Œä¸º0çš„ï¼Œåˆå§‹ä¸º 1ä¸ª:  å› ä¸ºå½“ å¯ä»¥1ä¸ªå¶æ•°éƒ½ä¸å–ï¼Œæ‰€ä»¥ä¸è¦å¿˜äº†åŠ 1) æœ‰é”™è¯·æŒ‡æ­£ï¼ˆå°ç™½ä¸€ä¸ªï¼‰
        cnt[0] = 1;
        cnt[pre[0]]++;

        int result = (pre[0] >= k)? cnt[pre[0] - k] :0;


        for (int i = 1; i < n; ++i) {
            pre[i] = pre[i-1] + (nums[i] & 1);


            cnt[pre[i]]++;

            //æ‰¾ å½“å‰ i ä¹‹å‰æœ‰å¤šå°‘ä¸ª jæ»¡è¶³
            if(pre[i] >= k){
                //å½“å‰å‰ç¼€å’Œ å¤§äºç­‰äºkï¼Œè¯´æ˜å‰é¢æœ‰ç¬¦åˆæ¡ä»¶çš„ç»“æœï¼Œ result ä¸­ç´¯åŠ ä¸Šä¸å½“å‰å‰ç¼€å’Œå·®å€¼ä¸º k çš„å‰ç¼€å’Œçš„ä¸ªæ•°ã€‚
                result = result + cnt[pre[i] - k];
             }
        }

        return result;


    }



    public static void main(String[] args) {
        int[] nums = {2,2,2,1,2,2,1,2,2,2};
        new Solution().numberOfSubarrays(nums,2);
    }
}
//leetcode submit region end(Prohibit modification and deletion)
